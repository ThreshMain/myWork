var VIDEO_DOMAIN='https://videos.crazygames.com/';var isShowing=true;$(document).ready(function(){$('#search_form_submit').click(function(){segmentTrack('ClickedSearchButton',{query:$('#search_form').val(),});});$('#search_form').one('focusin',function(){segmentTrack("StartedSearch",{});});$("#search_form").autocomplete({minLength:2,source:jsGlobals.search_url,focus:function(event,ui){event.preventDefault();},select:function(event,ui){segmentTrack("ClickedAutocompleteSearch",{gameSlug:ui.item.slug,});if(ui.item){window.location=ui.item.url;}}}).data("ui-autocomplete")._renderItem=function(ul,item){if(item.type=="game"){var inner_html='<a><div class="list_item_container">'+
'<div class="image"><img height="30" src="https://images.crazygames.com/'+item.image+'?w=48&auto=format,compress&ch=DPR&q=90&cs=strip" width="48" /></div>'+
'<div class="label">'+item.label+'</div>'+
'</div></a>';}else if(item.type=="tag"){var inner_html='<a>'+item.label+'</a>';}else{var inner_html='<a>'+item.label+'</a>';}
return $('<li></li>').data('item.autocomplete',item).append(inner_html).appendTo(ul);};$(window).scroll(function(){if(!topIsAbsolute){$("#close").css("display","block");}});var topIsAbsolute=false;$("#close").click(function(event){event.preventDefault();if(!topIsAbsolute){$("#top").css('position','absolute');$("#close").hide();topIsAbsolute=true;}
var scrollTop=$(window).scrollTop().toString();});});(function(){var f="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function h(){h=function(){};g.Symbol||(g.Symbol=k)}var l=0;function k(a){return"jscomp_symbol_"+(a||"")+l++}
function m(){h();var a=g.Symbol.iterator;a||(a=g.Symbol.iterator=g.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&f(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return n(this)}});m=function(){}}function n(a){var b=0;return q(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function q(a){m();a={next:a};a[g.Symbol.iterator]=function(){return this};return a}
function r(a){if(!(a instanceof Array)){m();var b=a[Symbol.iterator];a=b?b.call(a):n(a);for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function t(a,b){function c(){}c.prototype=b.prototype;a.N=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var u=[];function w(a,b){var c=this;this.context=a;this.u=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.b=[];this.a=[];this.h=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.a[c.a.length-1].apply(null,[].concat(r(b)))};this.c?a.set(b,this.h):a[b]=this.h}function x(a,b,c){a=y(a,b);a.b.push(c);z(a)}function A(a,b,c){a=y(a,b);c=a.b.indexOf(c);-1<c&&(a.b.splice(c,1),0<a.b.length?z(a):(c=u.indexOf(a),-1<c&&(u.splice(c,1),a.c?a.context.set(a.u,a.f):a.context[a.u]=a.f)))}
function z(a){a.a=[];for(var b,c=0;b=a.b[c];c++){var d=a.a[c-1]||a.f.bind(a.context);a.a.push(b(d))}}function y(a,b){var c=u.filter(function(c){return c.context==a&&c.u==b})[0];c||(c=new w(a,b),u.push(c));return c}function B(a,b,c,d){if("function"==typeof d){var e=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,void 0,void 0);e(c)}}}return C({},a,b)}var D={};function E(a,b){function c(){clearTimeout(e.timeout);e.send&&A(a,"send",e.send);delete D[d];e.w.forEach(function(a){return a()})}var d=a.get("trackingId"),e=D[d]=D[d]||{};clearTimeout(e.timeout);e.timeout=setTimeout(c,0);e.w=e.w||[];e.w.push(b);e.send||(e.send=function(a){return function(b){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];c();a.apply(null,[].concat(r(d)))}},x(a,"send",e.send))}
var C=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=0,e=c.length;d<e;d++){var v=Object(c[d]),p;for(p in v)Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}return a},G=function F(b){return b?(b^16*Math.random()>>b/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,F)};function H(){this.a={}}function aa(a,b){(a.a.externalSet=a.a.externalSet||[]).push(b)}
H.prototype.B=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(this.a[a]=this.a[a]||[]).forEach(function(a){return a.apply(null,[].concat(r(c)))})};var I={},J=!1,K;function L(a,b){b=void 0===b?{}:b;this.a={};this.b=a;this.j=b;this.g=null}t(L,H);function M(a,b,c){a=["autotrack",a,b].join(":");I[a]||(I[a]=new L(a,c),J||(window.addEventListener("storage",N),J=!0));return I[a]}
function O(){if(null!=K)return K;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),K=!0}catch(a){K=!1}return K}L.prototype.get=function(){if(this.g)return this.g;if(O())try{this.g=P(window.localStorage.getItem(this.b))}catch(a){}return this.g=C({},this.j,this.g)};L.prototype.set=function(a){this.g=C({},this.j,this.g,a);if(O())try{var b=JSON.stringify(this.g);window.localStorage.setItem(this.b,b)}catch(c){}};function ba(a){a.g={};if(O())try{window.localStorage.removeItem(a.b)}catch(b){}}function Q(a){delete I[a.b];Object.keys(I).length||(window.removeEventListener("storage",N),J=!1)}function N(a){var b=I[a.key];if(b){var c=C({},b.j,P(a.oldValue));a=C({},b.j,P(a.newValue));b.g=a;b.B("externalSet",a,c)}}function P(a){var b={};if(a)try{b=JSON.parse(a)}catch(c){}return b}var R={};function S(a,b,c){this.f=a;this.timeout=b||T;this.timeZone=c;this.b=this.b.bind(this);x(a,"sendHitTask",this.b);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(d){}this.a=M(a.get("trackingId"),"session",{hitTime:0,isExpired:!1});this.a.get().id||this.a.set({id:G()})}function ca(a,b,c){var d=a.get("trackingId");return R[d]?R[d]:R[d]=new S(a,b,c)}
S.prototype.isExpired=function(a){a=void 0===a?this.a.get().id:a;if(a!=this.a.get().id)return!0;a=this.a.get();if(a.isExpired)return!0;var b=a.hitTime;return b&&(a=new Date,b=new Date(b),a-b>6E4*this.timeout||this.c&&this.c.format(a)!=this.c.format(b))?!0:!1};S.prototype.b=function(a){var b=this;return function(c){a(c);var d=c.get("sessionControl");c="start"==d||b.isExpired();var d="end"==d,e=b.a.get();e.hitTime=+new Date;c&&(e.isExpired=!1,e.id=G());d&&(e.isExpired=!0);b.a.set(e)}};var T=30,U={D:1,F:2,G:3,I:4,J:5,K:6,A:7,L:8,M:9,H:10},V=Object.keys(U).length;function da(a){var b=U.A;a.set("\x26_av","2.4.1");var c=a.get("\x26_au"),c=parseInt(c||"0",16).toString(2);if(c.length<V)for(var d=V-c.length;d;)c="0"+c,d--;b=V-b;c=c.substr(0,b)+1+c.substr(b+1);a.set("\x26_au",parseInt(c||"0",2).toString(16))}var W=G();function X(a,b){var c=this;da(a);document.visibilityState&&(this.a=C({sessionTimeout:T,visibleThreshold:5E3,sendInitialPageview:!1,fieldsObj:{}},b),this.b=a,this.h=document.visibilityState,this.o=null,this.v=!1,this.m=this.m.bind(this),this.f=this.f.bind(this),this.l=this.l.bind(this),this.s=this.s.bind(this),this.c=M(a.get("trackingId"),"plugins/page-visibility-tracker"),aa(this.c,this.s),this.i=ca(a,this.a.sessionTimeout,this.a.timeZone),x(a,"set",this.m),window.addEventListener("unload",this.l),document.addEventListener("visibilitychange",this.f),E(this.b,function(){if("visible"==document.visibilityState)c.a.sendInitialPageview&&(Y(c,{C:!0}),c.v=!0),c.c.set({time:+new Date,state:"visible",pageId:W,sessionId:c.i.a.get().id});else if(c.a.sendInitialPageview&&c.a.pageLoadsMetricIndex){var a={},a=(a.transport="beacon",a.eventCategory="Page Visibility",a.eventAction="page load",a.eventLabel="(not set)",a["metric"+c.a.pageLoadsMetricIndex]=1,a.nonInteraction=!0,a);c.b.send("event",B(a,c.a.fieldsObj,c.b,c.a.hitFilter))}}))}
X.prototype.f=function(){var a=this;if("visible"==document.visibilityState||"hidden"==document.visibilityState){var b=ea(this),c={time:+new Date,state:document.visibilityState,pageId:W,sessionId:this.i.a.get().id};"visible"==document.visibilityState&&this.a.sendInitialPageview&&!this.v&&(Y(this),this.v=!0);"hidden"==document.visibilityState&&this.o&&clearTimeout(this.o);this.i.isExpired(b.sessionId)?(ba(this.c),"hidden"==this.h&&"visible"==document.visibilityState&&(clearTimeout(this.o),this.o=setTimeout(function(){a.c.set(c);Y(a,{hitTime:c.time})},this.a.visibleThreshold))):(b.pageId==W&&"visible"==b.state&&Z(this,b),this.c.set(c));this.h=document.visibilityState}};function ea(a){var b=a.c.get();"visible"==a.h&&"hidden"==b.state&&b.pageId!=W&&(b.state="visible",b.pageId=W,a.c.set(b));return b}
function Z(a,b,c){c=(c?c:{}).hitTime;var d={hitTime:c},d=(d?d:{}).hitTime;(b=b.time?(d||+new Date)-b.time:0)&&b>=a.a.visibleThreshold&&(b=Math.round(b/1E3),d={transport:"beacon",nonInteraction:!0,eventCategory:"Page Visibility",eventAction:"track",eventValue:b,eventLabel:"(not set)"},c&&(d.queueTime=+new Date-c),a.a.visibleMetricIndex&&(d["metric"+a.a.visibleMetricIndex]=b),a.b.send("event",B(d,a.a.fieldsObj,a.b,a.a.hitFilter)))}
function Y(a,b){var c=b?b:{};b=c.hitTime;var c=c.C,d={transport:"beacon"};b&&(d.queueTime=+new Date-b);c&&a.a.pageLoadsMetricIndex&&(d["metric"+a.a.pageLoadsMetricIndex]=1);a.b.send("pageview",B(d,a.a.fieldsObj,a.b,a.a.hitFilter))}X.prototype.m=function(a){var b=this;return function(c,d){var e={},e="object"==typeof c&&null!==c?c:(e[c]=d,e);e.page&&e.page!==b.b.get("page")&&"visible"==b.h&&b.f();a(c,d)}};X.prototype.s=function(a,b){a.time!=b.time&&(b.pageId!=W||"visible"!=b.state||this.i.isExpired(b.sessionId)||Z(this,b,{hitTime:a.time}))};X.prototype.l=function(){"hidden"!=this.h&&this.f()};X.prototype.remove=function(){Q(this.c);var a=this.i;A(a.f,"sendHitTask",a.b);Q(a.a);delete R[a.f.get("trackingId")];A(this.b,"set",this.m);window.removeEventListener("unload",this.l);document.removeEventListener("visibilitychange",this.f)};(function(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b})("pageVisibilityTracker",X);})();var showVideo=function(gameTile,videoName,videoWidth,videoHeight,poster){if(!gameTile.querySelector('.video-div')){var div=document.createElement('div');div.style='display: block; z-index: 2;';div.className='video-div';var imageContainer=gameTile.getElementsByClassName('image-container')[0];imageContainer.insertBefore(div,imageContainer.firstChild);var videoTag=document.createElement('video');videoTag.autoplay='autoplay';videoTag.loop='loop';videoTag.muted=true;videoTag.style.height=videoHeight+'px';videoTag.style.width=videoWidth+'px';videoTag.poster=poster;var videoDiv=imageContainer.getElementsByClassName('video-div')[0];videoDiv.appendChild(videoTag);var source=document.createElement('source');source.src=videoName;source.type='video/mp4';videoTag.appendChild(source);}};var hideVideo=function(gameTile){gameTile.querySelector('.image-container > img').style.display='block';var item=gameTile.getElementsByClassName('video-div');if(item.length>0){item[0].parentNode.removeChild(item[0]);}};function attachVideoListeners(){var gameTiles=document.getElementsByClassName('tile');for(var i=0;i<gameTiles.length;i++){if(gameTiles[i].dataset.videoSrc){var videoSrc=VIDEO_DOMAIN+gameTiles[i].dataset.videoSrc;var videoWidth=gameTiles[i].dataset.videoWidth;var videoHeight=gameTiles[i].dataset.videoHeight;var poster=gameTiles[i].dataset.imageSrc;gameTiles[i].onmouseenter=showVideo.bind(this,gameTiles[i],videoSrc,videoWidth,videoHeight,poster);gameTiles[i].onmouseleave=hideVideo.bind(this,gameTiles[i]);}else{var gameSlug=gameTiles[i].dataset.gameSlug;gameTiles[i].onmouseenter=function(){var tileUnity=this.getElementsByClassName('tileUnity');if(tileUnity.length>0&&tileUnity[0]!=null){tileUnity[0].style.display='none';}
var tileNoVideo=this.getElementsByClassName('tileNoVideo');if(tileNoVideo.length>0&&tileNoVideo[0]!=null){tileNoVideo[0].style.display='block';var tileNotAvailable=tileNoVideo[0].classList.contains('tileNotAvailable');if(!tileNotAvailable&&Math.random()<0.1){ga('send','event','tilePreviewSampled10','hoverNoVideo',gameSlug);}}};gameTiles[i].onmouseleave=function(){var tileUnity=this.getElementsByClassName('tileUnity');if(tileUnity.length>0&&tileUnity[0]!=null){tileUnity[0].style.display='block';}
var tileNoVideo=this.getElementsByClassName('tileNoVideo');if(tileNoVideo.length>0&&tileNoVideo[0]!=null){tileNoVideo[0].style.display='none';}};}}}
attachVideoListeners();function getURLParameter(name){return decodeURIComponent((new RegExp('[?|&]'+name+'='+'([^&;]+?)(&|#|;|$)').exec(location.search)||[null,''])[1].replace(/\+/g,'%20'))||null;}
function setUtmCampaignCookie(campaign){document.cookie="cgUtmCampaign="+campaign+"; expires=Fri, 31 Dec 9999 23:59:59 GMT";}
var urlUtmParam=getURLParameter('utm_campaign');if(urlUtmParam){setUtmCampaignCookie(urlUtmParam);}